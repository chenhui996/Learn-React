# Ref

### 引言

- 本篇从 React Refs 的:
  - 使用场景
  - 使用方式
  - 注意事项
- 到 createRef 与 Hook useRef 的对比使用;
- 最后以 React createRef 源码结束;

---

- 剖析整个 React Refs;
- 关于 React.forwardRef 会在 '另' 一篇文章深入探讨;

### 一、Refs

- React 的 '核心思想' 是:
  - 每次对于界面 state 的改动:
    - 都会重新渲染整个 Virtual DOM;
      - 然后'新老'的两个 Virtual DOM 树进行 diff（协调算法）;
        - 对比出变化的地方:
          - 然后通过 render 渲染到实际的 UI 界面;

---

- 使用 Refs:
  - 为我们提供了一种:
    - 绕过 '状态更新' 和 '重新渲染' 时:
      - 访问元素的方法;
  - 这在 '某些用例' 中很有用;
    - 但不应该作为 props 和 state 的替代方法;

---

- 在项目开发中:
  - 如果我们可以使用:
    - 声明式
    - 提升 state 所在的组件层级（状态提升）
  - 方法来更新组件;
    - 最好不要使用 refs;

#### 使用场景

##### 管理焦点（如文本选择）或处理表单数据:

- Refs 将管理文本框当前焦点选中;
- 或文本框其它属性;

---

- 在大多数情况下,我们推荐使用:
  - '受控组件' 来处理 '表单数据';
    - 在一个受控组件中:
      - '表单数据' 是由 'React 组件' 来管理的;
        - 每个 '状态更新' 都编写 '数据处理' 函数;
- 另一种 '替代方案' 是:
  - 使用非受控组件:
    - 这时 '表单数据' 将交由:
      - DOM 节点来处理;
  - 要编写一个非受控组件:
    - 就需要使用 Refs :
      - 来从 DOM 节点中 '获取' 表单数据;
